<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:b="http://bootsfaces.net/ui"
	template="/templates/dashboard.xhtml">

	<ui:define name="document-title">Business Process Impact Analysis</ui:define>

	<ui:define name="page-name">Dashboard: &#160; <strong>Business Process Impact Analysis</strong></ui:define>

	<ui:define name="top-left-chart">
		<div id="orgRiskHistoryLineChartContainer" align="center" style="height: 200px;"></div>
		<h:outputText value="#{orgRiskHistoryLineChart.getOrgRiskHistoryLineChart()}" escape="false" />
	</ui:define>

	<ui:define name="top-right-chart">
		<div id="riskAppetiteGaugeContainer" align="center" style="height: 200px;"></div>
		<h:outputText value="#{riskAppetiteGauge.getRiskAppetiteGauge()}" escape="false" />
	</ui:define>

	<ui:define name="left-charts">
		<div id="criticalSystemsAtRiskPieChartContainer" align="center" style="height: 400px;"></div>
		<h:outputText value="#{criticalSystemsAtRiskPieChart.getCriticalSystemsAtRiskPieChart()}" escape="false" />
	</ui:define>

	<ui:define name="right-charts">
		<div id="businessProcessesCyVaRChartContainer" align="center" style="height: 400px;"></div>
		<h:outputText value="#{businessProcessesCyVaRChart.getBusinessProcessesCyVaRChart()}" escape="false" />
	</ui:define>

	<ui:define name="full-width-table">
		<div class="dataTableDivClass">
		<h2>Business Process Detail</h2>
		<h3 id="businessProcessNameID">All</h3>
		<h:form>
			<b:dataTable value="#{businessProcessesByCyvarTable.businessProcesses}" var="businessProcess" styleClass="businessProcessesByCyvarTableClass">

				<!-- Will be supported in Bootsfaces 1.2 -->
				<!--
				<f:facet name="header">
					<tr>
						<th rowspan="2">Business Process</th>
						<th rowspan="2">Record Type</th>
						<th rowspan="2"># Records</th>
						<th rowspan="2">Annual Revenue</th>
						<th rowspan="2">BPIV</th>
						<th rowspan="2">Expected Loss Value</th>
						<th rowspan="2">Expected Loss Value2</th>
						<th rowspan="2">Expected Loss Value3</th>
						<th rowspan="2">CyVaR</th>
						<th rowspan="2">Max Breach Loss</th>
					</tr>
					<tr>
						<th>Minimum</th>
						<th>ELV</th>
						<th>Max</th>
					</tr>
				</f:facet>
				-->

				<b:dataTableColumn value="#{businessProcess.processName}">
					<f:facet name="header">Business Process</f:facet>
				</b:dataTableColumn>

				<b:dataTableColumn value="#{businessProcess.recordType}">
					<f:facet name="header">Record Type(s)</f:facet>
				</b:dataTableColumn>

				<b:dataTableColumn value="#{businessProcess.numRecords}" style="text-align:right;">
					<f:facet name="header"># Records</f:facet>
				</b:dataTableColumn>

				<b:dataTableColumn value="#{businessProcess.annualRevenue}" style="text-align:right;">
					<f:facet name="header">Annual Revenue</f:facet>
				</b:dataTableColumn>	
							
				<b:dataTableColumn value="#{businessProcess.BPIV}" style="text-align:right;">
					<f:facet name="header">BPIV</f:facet>
				</b:dataTableColumn>

				<b:dataTableColumn value="#{businessProcess.minELV}" style="text-align:right;">
					<f:facet name="header">Min ELV</f:facet>
				</b:dataTableColumn>
				<!--
				<b:dataTableColumn value="Spark Chart Goes Here" style="text-align:right;">
					<f:facet name="header">Distribution of ELV</f:facet>
				</b:dataTableColumn>
				-->
				<b:dataTableColumn value="#{businessProcess.maxELV}" style="text-align:right;">
					<f:facet name="header">Max ELV</f:facet>
				</b:dataTableColumn>

				<b:dataTableColumn value="#{businessProcess.CYVAR}" style="text-align:right;">
					<f:facet name="header">CyVaR</f:facet>
				</b:dataTableColumn>

				<b:dataTableColumn value="#{businessProcess.riskAppetite}" style="text-align:right;">
					<f:facet name="header">Risk Appetite</f:facet>
				</b:dataTableColumn>

				<b:dataTableColumn value="#{businessProcess.maxBreachLoss}" style="text-align:right;">
					<f:facet name="header">Max Breach Loss</f:facet>
				</b:dataTableColumn>

				<!--  
				<b:dataTableColumn value="#{businessProcess.processName}" />

				<b:dataTableColumn value="#{businessProcess.recordType}" />

				<b:dataTableColumn value="#{businessProcess.numRecords}" style="text-align:right;" />

				<b:dataTableColumn value="#{businessProcess.annualRevenue}" style="text-align:right;" />
							
				<b:dataTableColumn value="#{businessProcess.nivScore}" style="text-align:right;" />

				<b:dataTableColumn value="$9,999" style="text-align:right;" />
				<b:dataTableColumn value="Spark Chart Goes Here" style="text-align:right;" />
				<b:dataTableColumn value="$9,999,999" style="text-align:right;" />

				<b:dataTableColumn value="#{businessProcess.cyvarValue}" style="text-align:right;" />

				<b:dataTableColumn value="#{businessProcess.cyvarValue}" style="text-align:right;" />
				-->

			</b:dataTable>
		</h:form>
		</div>
	</ui:define>

	<ui:define name="body-javascript">

		<script type="text/javascript" src="#{request.contextPath}/resources/js/pages/dashboard-business-process-impact.js"></script>

	</ui:define>

</ui:composition>
